@using PandaDataAccessLayer.Entities

@{
    var core = AuthorizationCore.StaticCreate();
    var isGuest = core.IsGuest;
    var user = core.User;
    var username = core.UserName;
    var firstName = core.FirstName;
    var city = core.City;

    const int FirstNameLength = 14;
}    

@if (isGuest)
{
    <div class="top-links content-width">
    <a href="#" class="first left middle">Выберите город</a>@*
     <a class="second right middle-img" href="@Url.Action(WebConstants.LoginActionName, WebConstants.AuthorizationControllerName)"><img src="~/Content/img/enter-button.png" /></a>*@

    
    <a href="#" id="loginButton" class="second right middle-img"><img src="~/Content/img/enter-button.png" /></a>
    
    @* TODO - why only promouter ??? *@
    <a href="#" id="registerButton"  class="third right middle">Зарегистрироваться на сайте</a>
        <div class="clear"></div>
    </div>
}
else 
{
    <div class="top-links content-width">

        <div class="header__city">
            <a href="#" class="header__city-link">@city</a>
        </div>
					<div class="header__prompt">
						<span class="header__prompt-hello">Здравствуйте:</span>
						<span class="header__prompt-name">@firstName.Shorten(FirstNameLength)</span>
					</div>
        <div class="header__offers">
            @if (user is PromouterUser)
            {
                <a class="header__offers-toyou" href="@Url.Action("Offers", "Search", new {user.Id})">Предложения для вас</a>
                <span class="header__offers-count">(@{ Html.RenderAction("OffersCount", "Search", new {user.Id}); })</span>
            }
            <a class="header__offers-selected" href="@Url.Action("UserIndex", "Favorite")">Выбранные вакансии</a><span class="header__offers-count">(@core.FavoritesCount)</span> |
            <a class="header__offers-saw" href="@Url.Action("Index", "Browsing")">Вашу анкету смотрели</a><span class="header__offers-count">(@core.BrowsingValuesCount)</span>
        </div>
					<div class="header__coins button">
						<div class="header__coins-icon"></div>
						<div class="header__coins-count">
							<span class="header__coins-count-number">@user.Coins</span>
							<span class="header__coins-count-unit">PC</span>
						</div>
						<div class="clear"></div>
					</div>
        <div class="header__userButtons">
            <a href="@Url.Action("Edit", core.UserController, new { id = core.User.Id })" class="header__cabinet-link button left">Личный кабинет</a>
            @Html.ActionLink("Выход","Logout","Authorization",null,new {@class = "header__cabinet-link button left"})
            <div class="clear"></div>
        </div>
    </div>
}
    